<form class="ddap-form"
      novalidate
      *ngIf="form"
      [formGroup]="form">
  <div class="row">
    <mat-form-field class="col">
      <input matInput
             placeholder="Display Name"
             formControlName="displayName"
             data-se="inp-display-name"
             required>
    </mat-form-field>
  </div>

  <div class="row"
       formGroupName="variables"
       *ngFor="let variable of variables | keyvalue">
    <mat-form-field class="col">
      <input matInput
             [attr.data-se]="'inp-variable-' + variable.key"
             [placeholder]="variable.value.ui.label"
             [required]="!variable.value.optional"
             [formControlName]="variable.key">
      <mat-hint>{{ variable.value.ui.description }}</mat-hint>
    </mat-form-field>
  </div>

  <h3>
    <mat-icon class="icon icon-access-policy"></mat-icon>
    <span>Access tier</span>
    <mat-icon (click)="helpDisplayed = !helpDisplayed">
      help_outline
    </mat-icon>
  </h3>
  <ng-container *ngIf="helpDisplayed">
    <p class="secondary-text">
      Quickstart will generate a resource protected by an access policy based on standard GA4GH visa types â€“ ControlledAccessGrants and ResearcherStatus,
      for controlled access or access by institutional affiliation, respectively. Policies of the two types,
      ControlledAccessGrants and ResearcherStatus, are shared between all Quickstart resources.
    </p>
    <p class="secondary-text">
      Resources generated by this form are unique (and can be freely edited in the advanced settings).
    </p>
  </ng-container>

  <div>
    <label id="access-level-radio-group-label">Select access level</label>
    <mat-radio-group #accessLevelRadioGroup="matRadioGroup"
                     aria-labelledby="access-level-radio-group-label"
                     [formControl]="accessLevelRadio"
                     class="access-radio-group">
      <mat-radio-button [value]="'Read'"
                        data-se="radio-access-level-Read">
        List and read
      </mat-radio-button>
      <mat-radio-button [value]="'Write'"
                        [disabled]="readonlyServiceTemplates.includes(serviceTemplate)"
                        [matTooltip]="readonlyServiceTemplates.includes(serviceTemplate) ? 'Write access is not supported' : null"
                        data-se="radio-access-level-Write">
        Read and write
      </mat-radio-button>
    </mat-radio-group>
  </div>
  <div>
    <label id="access-policy-radio-group-label">
      Select access policy type
    </label>
    <mat-radio-group #accessPolicyRadioGroup="matRadioGroup"
                     aria-labelledby="access-policy-radio-group-label"
                     [formControl]="accessPolicyRadio"
                     class="access-radio-group">
      <mat-radio-button [value]="'ControlledAccessGrants'"
                        data-se="radio-access-policy-ControlledAccessGrants">
        Allow access to anyone with the control access grant
      </mat-radio-button>
      <mat-radio-button [value]="'ResearcherStatus'"
                        data-se="radio-access-policy-ResearcherStatus">
        Allow access to researchers from institution
      </mat-radio-button>
    </mat-radio-group>
  </div>
  <div class="row">
    <mat-form-field class="col">
      <input matInput
             placeholder="Access Policy Value URL"
             formControlName="accessPolicyValue"
             data-se="inp-access-policy-value"
             required>
    </mat-form-field>
  </div>
</form>
